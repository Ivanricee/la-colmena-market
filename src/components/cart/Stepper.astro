---
import { STEPS } from '@/pages/cart/cart.config'
import Button from '../ui/Button.astro'
import { Icon } from 'astro-icon/components'
---

<div class="mb-8 flex items-center justify-center gap-1 px-1 sm:mb-10 sm:gap-2">
  {
    STEPS.map((s, i) => (
      <div class="flex shrink-0 items-center gap-1 sm:gap-2">
        <Button
          variant="outline"
          x-on:click={`${s.id} < step && setStep(${s.id})`}
          class={`h-11 w-11 rounded-full px-0 py-0 text-sm font-medium transition-all sm:h-auto sm:w-auto sm:gap-2 sm:px-4 sm:py-2`}
          x-bind:class={`step === ${s.id}
            ? "bg-primary text-primary-foreground shadow-md"
            : step > ${s.id}
              ? "bg-primary/20 text-primary cursor-pointer"
              : "bg-muted text-muted-foreground"`}
          x-bind:disabled={`${s.id} > step`}
          x-cloak
        >
          <Icon name={`lucide:${s.icon}`} size={20} />
          <span class="hidden sm:inline">{s.label}</span>
        </Button>
        {i < STEPS.length - 1 && (
          <div
            class={`h-0.5 w-4 sm:w-8`}
            x-bind:class={`step > ${s.id} ? "bg-primary" : "bg-border"`}
          />
        )}
      </div>
    ))
  }
</div>
